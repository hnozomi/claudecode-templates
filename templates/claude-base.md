# claude.md - 汎用開発基盤テンプレート

🎯 プロジェクト概要
[プロジェクト固有の説明をここに記載]

基本方針
- 個人使用特化: 複数ユーザー対応は考慮しない
- シンプル第一: 複雑な機能より使いやすさを重視
- データ永続性: 信頼性のあるストレージを活用
- 段階的構築: MVP→機能拡張の順で開発
- 型安全性: TypeScript完全対応

🛠️ 技術スタック
フロントエンド
- フレームワーク: Next.js / React / Vue.js (プロジェクトに応じて選択)
- 言語: TypeScript 5.2+ (必須)
- スタイリング: [プロジェクト固有テンプレートで指定]
- UI ライブラリ: [プロジェクト固有テンプレートで指定]

状態管理・データフェッチ
- 状態管理: [プロジェクトの規模・複雑さに応じて選択]
- データフェッチ: [API設計に応じて選択]
- フォーム: [フォーム要件に応じて選択]
- バリデーション: [バリデーション要件に応じて選択]

開発・品質管理
- リンター・フォーマッター: Biome
- デプロイ: Vercel
- バージョン管理: GitHub + 連携

📁 プロジェクト構造
```
project-name/
├── src/                      # ソースコード
│   ├── components/          # 再利用可能コンポーネント
│   ├── features/           # 機能別モジュール
│   │   ├── shared/         # 共通コンポーネント
│   │   └── [feature-name]/ # 各機能フォルダ
│   ├── lib/               # ライブラリ・ユーティリティ
│   ├── types/             # TypeScript型定義
│   ├── constants/         # 定数・設定
│   └── [framework-specific]/ # フレームワーク固有のフォルダ
├── docs/                   # プロジェクトドキュメント
├── tests/                  # テストファイル
└── [config-files]         # 設定ファイル群
```

🔧 開発設定・ルール
TypeScript設定
```json
{
  "compilerOptions": {
    "strict": true,
    "noUncheckedIndexedAccess": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

技術選択設定
[プロジェクト固有テンプレートで具体的な設定を記載]

Biome設定
```json
{
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true
    }
  },
  "formatter": {
    "enabled": true,
    "indentStyle": "space",
    "indentWidth": 2
  },
  "organizeImports": {
    "enabled": true
  }
}
```

**🔍 コード修正後の必須チェック**
コードを修正した後は、必ずBiomeで静的解析を実行してください：

```bash
# Biome チェック（エラー・警告の確認）
npx @biomejs/biome check .

# 自動修正可能な問題を修正
npx @biomejs/biome check --apply .

# フォーマットのみ実行
npx @biomejs/biome format --write .
```

Biomeエラーが0件になるまで修正を継続し、完了報告時に必ず「Biome静的解析: パス」を含めてください。

📋 コーディング規約
ファイル命名規則
- コンポーネント: PascalCase (例: UserCard.tsx)
- フック: camelCase + use prefix (例: useUserData.ts)
- ユーティリティ: camelCase (例: formatDate.ts)
- 定数: UPPER_SNAKE_CASE (例: API_ENDPOINTS)

フォルダ構造規則
- features/[機能名]/components/: 機能別コンポーネント
- features/[機能名]/hooks/: 機能別カスタムフック
- features/shared/: 複数機能で共用するコンポーネント

Import順序
```typescript
// 1. フレームワーク関連
import { useState } from 'react';
import { NextPage } from 'next';

// 2. 外部ライブラリ
import { useQuery } from '@tanstack/react-query';

// 3. 内部インポート（@/ alias使用）
import { useUserData } from '@/features/users/hooks/useUserData';
import { Button } from '@/features/shared/components/Button';
```

コンポーネント設計原則
- 単一責任: 1コンポーネント1責任
- Props型定義: 必ずinterfaceで定義
- デフォルトエクスポート: Pageコンポーネントのみ
- Named エクスポート: その他すべてのコンポーネント

エラーハンドリング
- API呼び出し: try-catch + 適切なHTTPステータス
- 非同期処理: Promise rejection handling
- フォーム: 適切なバリデーションライブラリの使用
- 予期しないエラー: エラー境界の実装

✅ 品質基準
必須要件
- ✅ TypeScriptエラー 0件
- ✅ Biome リンター・フォーマッターエラー 0件
- ✅ レスポンシブ対応（該当する場合）
- ✅ 適切なエラーハンドリング
- ✅ アクセシビリティ基本対応（該当する場合）

パフォーマンス要件
- ✅ 初期ロード 3秒以内
- ✅ ページ遷移 1秒以内
- ✅ スクロール 60fps維持
- ✅ バンドルサイズ最適化

UX要件
- ✅ ローディング状態の表示
- ✅ エラー状態の適切な表示
- ✅ 空状態のデザイン
- ✅ 成功・失敗フィードバック

🧪 テスト・確認方法
開発時確認
```bash
# TypeScript型チェック
npx tsc --noEmit

# Biome静的解析（リンター・フォーマッター）
npx @biomejs/biome check .

# Biome自動修正
npx @biomejs/biome check --apply .

# 開発サーバー起動
npm run dev

# ビルドテスト
npm run build
```

ブラウザ確認
- 開発者ツール: パフォーマンス・ネットワーク
- レスポンシブテスト: モバイル・タブレット表示確認（該当する場合）
- 機能テスト: 主要機能の動作確認

📝 Claude Code使用時の重要なTips

🚨 情報不足時の対応
情報が足りない場合は、必ず以下を報告してください：

❓ 情報不足により実装を停止しました

【不足している情報】
- ○○の仕様が不明です
- ○○との連携方法が分かりません
- ○○のデザイン要件が不明です

【確認が必要な項目】
1. ○○について詳細を教えてください
2. ○○の優先度はどの程度ですか？
3. ○○の代替案も検討しますか？

【現在の実装可能範囲】
- ○○の部分は実装可能です
- ○○は一旦仮実装します

推測で実装を進めることは禁止です。必ず確認してください。

⚡ 段階的実装の重要性
一度に大きなタスクを実装しないでください。以下の手順を守ってください：

📋 実装開始前の確認

【理解した内容】
- 目標: ○○を実装する
- 使用技術: ○○
- 対象ファイル: ○○

【実装予定の順序】
1. ○○から開始
2. 次に○○を実装
3. 最後に○○を確認

【想定される課題】
- ○○で問題が起きる可能性
- ○○の依存関係を要確認

この理解で正しいですか？開始して良いですか？

🔄 実装途中経過

【完了した部分】
- ✅ ○○ファイル作成完了
- ✅ ○○機能の基本実装完了

【現在作業中】
- 🔄 ○○の実装中（○○%完了）

【発見した問題】
- ⚠️ ○○で想定外のエラー
- ❓ ○○の仕様確認が必要

【次のステップ】
- ○○を実装予定
- ○○の確認後に進行

✅ 完了報告

✅ [タスク名] 完了

【実装内容】
- 📁 作成ファイル: ○○
- 🔧 修正ファイル: ○○
- 🎯 実装機能: ○○

【コード品質確認結果】
- ✅ TypeScriptエラー: 0件
- ✅ Biome静的解析: パス
- ✅ コンパイル: 成功
- ✅ 表示確認: 正常
- ✅ 基本動作: 正常

【残課題・注意点】
- ⚠️ ○○は今後要対応
- 💡 ○○の改善余地あり

【推奨する次のステップ】
- ○○の実装
- ○○との連携テスト

🛑 エラー発生時の対応
エラーが発生した場合の報告フォーマット：

🚨 エラー発生により作業を中断しました

【エラー詳細】
- エラーメッセージ: ○○
- 発生箇所: ○○ファイルの○○行目
- エラーの種類: TypeScript/Runtime/Build/Biome エラー

【実行していた作業】
- ○○を実装中
- ○○の処理で発生

【現在の状況】
- ○○までは正常動作
- ○○から問題発生

【対応方針の提案】
1. ○○を修正する方法
2. ○○で回避する方法
3. ○○を再設計する方法

どの方針で進めますか？追加情報が必要ですか？

💡 効果的なコミュニケーション
✅ 良い指示の受け方
- 理解確認: 「○○の理解で正しいですか？」
- 優先度確認: 「○○と○○、どちらを優先しますか？」
- 代替案提示: 「○○が難しい場合、○○はいかがですか？」
- 影響範囲確認: 「この変更は○○に影響しますが大丈夫ですか？」

❌ 避けるべき行動
- 推測による実装: 仕様が曖昧なまま進めない
- サイレント実装: 進捗を報告せず長時間作業しない
- 丸投げ質問: 「どうすればいいですか？」だけで終わらない
- エラー隠し: 小さなエラーでも必ず報告する

🎯 タスク実行時の基本方針

1. 最小単位での実装
- 1つの機能 = 1つのコンポーネント
- 1つのファイル作成後に動作確認
- 大きなタスクは自分で分割して提案

2. 依存関係の明確化

📦 依存関係チェック

【必要な前提条件】
- ✅ ○○が実装済み
- ❌ ○○が未実装（要事前対応）
- ❓ ○○の状況不明（要確認）

【今回のタスクで影響する範囲】
- ○○ファイルに影響
- ○○機能に影響

3. 品質確認の自動化
実装後は必ず以下を実行・報告：

```bash
# TypeScript チェック
npx tsc --noEmit

# Biome 静的解析
npx @biomejs/biome check .

# 開発サーバー起動確認
npm run dev

# ビルド確認  
npm run build
```

🔄 継続的な改善指針
学習・適応
- 新しい問題に遭遇したら、解決方法を記録
- より効率的な実装方法を見つけたら提案
- プロジェクト固有の知見を蓄積

プロアクティブな提案
- 「○○をこのように改善できます」
- 「○○で問題が起きる可能性があります」
- 「○○の実装順序を変更した方が効率的です」

チーム開発への配慮
- コードの可読性を重視
- コメントで実装意図を説明
- 他の開発者が理解しやすい構造を心がける

⚠️ 重要な実装指針
優先順位
1. 型安全性: TypeScript完全対応
2. コード品質: Biome静的解析パス
3. パフォーマンス: 適切な最適化手法の適用
4. アクセシビリティ: 基本的な配慮（該当する場合）
5. 保守性: 明確な構造 + 適切な分離

回避すべき実装
- ❌ any型の使用
- ❌ 適切でない非同期処理
- ❌ 直接的なDOM操作（フレームワークを使用している場合）
- ❌ 非同期処理のエラーハンドリング不備
- ❌ アクセシビリティの無視（該当する場合）
- ❌ Biomeエラーを残したままの実装

この基盤設定に従って、具体的なタスクを段階的に実行していきます。